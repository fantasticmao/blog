---
title: "äºŒåˆ†æŸ¥æ‰¾çš„å®ç°ç»†èŠ‚"
date: 2018-03-10T14:58:31+08:00
categories: ["ç®—æ³•"]
tags: ["Algorithm"]
---

<blockquote class="blockquote-center">Even though the idea is simple, implementing binary search correctly requires attention to some subtleties about its exit conditions and midpoint calculation.</blockquote>

æœ€è¿‘ç•™æ„åˆ°å…³äºå®ç° [äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼ˆBinary Search Algorithmï¼‰](https://en.wikipedia.org/wiki/Binary_search_algorithm) çš„ä¸€ä¸ªå°æé†’ï¼Œå†…å®¹å¤§è‡´æ„æ€æ˜¯ï¼šå°½ç®¡ç®—æ³•æ€æƒ³å¾ˆç®€å•ï¼Œä½†æˆ‘ä»¬åœ¨æ­£ç¡®å®ç°äºŒåˆ†æŸ¥æ‰¾çš„æ—¶å€™ï¼Œä»éœ€æ³¨æ„ä¸€ä¸‹å…³äºç®—æ³•é€€å‡ºæ¡ä»¶å’Œä¸­é—´å€¼è®¡ç®—çš„ç›¸å…³ç»†èŠ‚ã€‚

æœ¬ç¯‡æ–‡ç« ç®€å•ä»‹ç»äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œå›´ç»•ç›¸å…³çš„å®ç°ç»†èŠ‚é—®é¢˜ï¼Œåšäº›æµ…æ˜¾çš„åˆ†æã€‚<!-- more -->

---

# ç®€å•ä»‹ç»

åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒäºŒåˆ†æŸ¥æ‰¾ä¹Ÿè¢«ç§°ä¸ºæŠ˜åŠæŸ¥æ‰¾ã€å¯¹æ•°æŸ¥æ‰¾ï¼Œæ˜¯ä¸€ç§åœ¨æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å…ƒç´ çš„æœç´¢ç®—æ³•ã€‚

äºŒåˆ†æŸ¥æ‰¾ä¼šå°†ç›®æ ‡å…ƒç´ ä¸æ•°ç»„ä¸­é—´å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œè‹¥ä¸ç›¸ç­‰ï¼Œåˆ™ç›®æ ‡å…ƒç´ ä¸å­˜åœ¨çš„åŠæ®µæ•°ç»„ä¼šè¢«æ·˜æ±°ï¼Œå¹¶ä¸”æŸ¥è¯¢ä¼šåœ¨ç›®æ ‡å…ƒç´ å­˜åœ¨çš„åŠæ®µæ•°ç»„ä¸­ç»§ç»­è¿›è¡Œï¼Œç›´åˆ°æ¯”è¾ƒæˆåŠŸä¸ºæ­¢ã€‚å¦‚æœæŸ¥è¯¢ä»¥ç©ºæ•°ç»„ä¸ºç»“æŸï¼Œåˆ™è¡¨ç¤ºç›®æ ‡å…ƒç´ ä¸å­˜åœ¨ã€‚ä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾çš„å…·ä½“è¿‡ç¨‹å¯ä»¥å‚è€ƒä¸‹å›¾ï¼ˆå›¾ç‰‡æ¥æºè‡ªç»´åŸºç™¾ç§‘ï¼‰ï¼š

![iamge](/images/äºŒåˆ†æŸ¥æ‰¾çš„å®ç°ç»†èŠ‚/1.png)

äºŒåˆ†æŸ¥æ‰¾çš„æœ€å·®æ—¶é—´å¤æ‚åº¦æ˜¯ ğ‘¶(log ğ’)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ ğ‘¶(1)ã€‚ç›¸æ¯”äºæœ€å·®æ—¶é—´å¤æ‚åº¦ä¸º ğ‘¶(ğ’) çš„ [çº¿æ€§æŸ¥æ‰¾ï¼ˆLinear Searchï¼‰](https://en.wikipedia.org/wiki/Linear_search)ï¼ŒäºŒåˆ†æŸ¥æ‰¾æ‰§è¡Œæ›´å¿«ã€æ•ˆç‡æ›´é«˜ã€‚ç›¸æ¯”äºä¸ºå¿«é€ŸæŸ¥æ‰¾é‡èº«å®šåˆ¶çš„æ•°æ®ç»“æ„ [å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰](https://en.wikipedia.org/wiki/Hash_table)ï¼ŒäºŒåˆ†æŸ¥æ‰¾çš„é™åˆ¶æ›´å°‘ã€åº”ç”¨æ›´å¹¿ã€‚

äºŒåˆ†æŸ¥æ‰¾æœ‰è®¸å¤šä¸åŒçš„å˜ç§ç‰ˆæœ¬ï¼Œä¾‹å¦‚ [Fractional Cascading](https://en.wikipedia.org/wiki/Fractional_cascading) åŠ é€Ÿäº†äºŒåˆ†æŸ¥æ‰¾åœ¨å¤šä¸ªæ•°ç»„ä¸­å¯¹ç›¸åŒæ•°å€¼çš„æœç´¢é€Ÿåº¦ï¼Œæœ‰æ•ˆè§£å†³äº†è®¡ç®—æœºå‡ ä½•ä»¥åŠå…¶å®ƒé¢†åŸŸä¸­çš„ä¸€ç³»åˆ—æœç´¢ç›¸å…³é—®é¢˜ï¼›[Exponential Search](https://en.wikipedia.org/wiki/Exponential_search) æ‰©å±•äº†äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œä½¿å…¶å¯ä»¥åº”ç”¨äºæ— ç•Œåˆ—è¡¨ã€‚

äºŒåˆ†æŸ¥æ‰¾çš„ç®—æ³•æ€æƒ³ä¹Ÿè¡ç”Ÿå‡ºäº†è®¸å¤šå…¶å®ƒæ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œä¾‹å¦‚ [Binary Search Tree](https://en.wikipedia.org/wiki/Binary_search_tree) å’Œ [B-Tree](https://en.wikipedia.org/wiki/B-tree)ã€‚

---

# åˆæ­¥å®ç°

ä»¥ Java è¯­è¨€ä¸ºä¾‹ï¼Œåˆæ­¥å®ç°ä¸€ä¸ªç®€å•çš„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œæ¼”ç¤ºä»£ç å¦‚ä¸‹ï¼š

```java
public int binarySearch(int[] arr, int low, int high, int key) {
    // ç®—æ³•é€€å‡ºæ¡ä»¶
    if (low > high) {
        return -1;
    }

     // è®¡ç®—æœ¬æ¬¡æŸ¥æ‰¾çš„ä¸­é—´å€¼
    int mid = (low + high) / 2;

     // äºŒåˆ†æŸ¥æ‰¾çš„åˆ¤æ–­é€»è¾‘
    if (arr[mid] < key) {
        return binarySearch(arr, mid + 1, high, key);
    } else if (arr[mid] > key) {
        return binarySearch(arr, low, mid - 1, key);
    } else {
        return mid;
    }
}
```

ä¾æ®æ–‡ç« å¼€å¤´çš„å°æé†’ review ä¸Šä¾‹ä»£ç ï¼Œå¯ä»¥å‘ç°å…¶ä¸­å­˜åœ¨ç€çš„ç»†èŠ‚é—®é¢˜ï¼š

1. ç¼ºå°‘å‚æ•°æ ¡éªŒ<br>å½“è¾“å…¥å‚æ•° `low` æˆ– `high` çš„æ•°å€¼å°äºé›¶æ—¶ï¼Œç¨‹åºä¼šå­˜åœ¨é€»è¾‘é”™è¯¯ã€‚
2. é€’å½’æŸ¥æ‰¾çš„æ ˆæº¢å‡º<br>å½“æŸ¥æ‰¾çš„æ¬¡æ•°è¶³å¤Ÿå¤šæ—¶ï¼Œç¨‹åºä¼šæŠ›å‡º `java.lang.StackOverflowError` å¼‚å¸¸ã€‚
3. ä¸­å€¼è®¡ç®—çš„æ•´å‹æº¢å‡º<br>å½“æŸ¥æ‰¾çš„æ•°ç»„è¶³å¤Ÿå¤§æ—¶ï¼Œç›´æ¥ä½¿ç”¨ `(low + high) / 2` è®¡ç®—äºŒåˆ†æŸ¥æ‰¾è¿‡ç¨‹ä¸­çš„ä¸­é—´æ•°å€¼ï¼Œç¨‹åºä¼šå­˜åœ¨æ•´å‹æ•°å€¼æº¢å‡ºçš„é—®é¢˜ã€‚

---

# æ­£ç¡®å®ç°

ä¿®å¤ä¸Šè¿°æåŠçš„ä¸‰ä¸ªé—®é¢˜ï¼Œæ¼”ç¤ºä»£ç å¦‚ä¸‹ï¼š

```java
public int binarySearch(int[] arr, int low, int high, int key) {
    // å‚æ•°æ ¡éªŒ
    if (arr == null || arr.length == 0 || low < 0 || high < 0) {
        return -1;
    }

    while (true) {
        // ç®—æ³•é€€å‡ºæ¡ä»¶
        if (low > high) {
            return -1;
        }

        // è®¡ç®—æœ¬æ¬¡æŸ¥æ‰¾çš„ä¸­é—´å€¼
        int mid = low + ((high - low) >>> 1);

        // äºŒåˆ†æŸ¥æ‰¾çš„åˆ¤æ–­é€»è¾‘
        if (arr[mid] < key) {
            low = mid + 1;
        } else if (arr[mid] > key) {
            high = mid - 1;
        } else {
            return mid;
        }
    }
}
```
